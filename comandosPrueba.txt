0) Reset + levantar backend

Borra el archivo:

backend/data/sistema_dicc.db

Levanta:

mvn -pl backend -DskipTests clean spring-boot:run

1) Login Jefatura (sanity check)
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  http://localhost:8080/api/v1/me

2) Crear proyecto (Jefatura) âœ… (guarda proyectoId)
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  -H "Content-Type: application/json" \
  -d '{"codigo":"PRJ-001","nombre":"Proyecto IA","correoDirector":"ariel.guana@epn.edu.ec"}' \
  http://localhost:8080/api/v1/jefatura/proyectos


ðŸ“Œ Copia proyectoId del JSON de respuesta â†’ PEGAR_PROYECTO_ID

3) Cambiar password del Director (nace con Temp123*)
curl -u ariel.guana@epn.edu.ec:Temp123* \
  -H "Content-Type: application/json" \
  -d '{"nuevaPassword":"Director2026*"}' \
  http://localhost:8080/api/v1/auth/cambiar-password


(chequeo opcional)

curl -u ariel.guana@epn.edu.ec:Director2026* \
  http://localhost:8080/api/v1/me

4) Director completa detalles del proyecto (IMPORTANTE)

(Sin esto, maxAyudantes=0 y no podrÃ¡s registrar ayudantes)

curl -u ariel.guana@epn.edu.ec:Director2026* \
  -X PUT \
  -H "Content-Type: application/json" \
  -d '{"fechaInicio":"2026-01-01","fechaFin":"2026-12-31","tipo":"INVESTIGACION","subtipo":"INTERNO","maxAyudantes":2,"maxArticulos":3}' \
  http://localhost:8080/api/v1/director/proyectos/PEGAR_PROYECTO_ID

5) Registrar ayudante + contrato (Director) âœ… (guarda contratoId + ayudanteId)
curl -u ariel.guana@epn.edu.ec:Director2026* \
  -H "Content-Type: application/json" \
  -d '{
    "nombres":"Juan",
    "apellidos":"Perez",
    "correoInstitucional":"juan.perez@epn.edu.ec",
    "facultad":"FIS",
    "quintil":2,
    "tipoAyudante":"AYUDANTE_INVESTIGACION",
    "fechaInicioContrato":"2026-01-01",
    "fechaFinContrato":"2026-03-31"
  }' \
  http://localhost:8080/api/v1/director/proyectos/PEGAR_PROYECTO_ID/ayudantes


ðŸ“Œ Copia contratoId â†’ PEGAR_CONTRATO_ID
ðŸ“Œ (El ayudante como usuario se crea solo si no existÃ­a antes)

6) Login Ayudante
curl -u juan.perez@epn.edu.ec:Temp123* \
  http://localhost:8080/api/v1/me

âœ… FASE 3 â€” BitÃ¡coras (Ayudante)
7) Obtener o crear bitÃ¡cora mensual actual (Ayudante) âœ… (guarda bitacoraId)
curl -u juan.perez@epn.edu.ec:Temp123* \
  -X POST \
  http://localhost:8080/api/v1/ayudante/bitacoras/actual


ðŸ“Œ Copia bitacoraId â†’ PEGAR_BITACORA_ID

8) Crear semana en esa bitÃ¡cora âœ… (guarda semanaId)
curl -u juan.perez@epn.edu.ec:Temp123* \
  -H "Content-Type: application/json" \
  -X POST \
  --data-binary @- \
  "http://localhost:8080/api/v1/ayudante/bitacoras/PEGAR_BITACORA_ID/semanas" <<'JSON'
{
  "fechaInicioSemana":"2026-01-05",
  "fechaFinSemana":"2026-01-09",
  "actividadesRealizadas":"Avance del mÃ³dulo de bitÃ¡coras",
  "observaciones":"Sin novedades",
  "anexos":"-"
}
JSON


ðŸ“Œ Copia semanaId â†’ PEGAR_SEMANA_ID

9) Crear actividad en la semana âœ…
curl -u juan.perez@epn.edu.ec:Temp123* \
  -H "Content-Type: application/json" \
  -X POST \
  --data-binary @- \
  "http://localhost:8080/api/v1/ayudante/semanas/PEGAR_SEMANA_ID/actividades" <<'JSON'
{
  "horaInicio":"08:00",
  "horaSalida":"10:00",
  "descripcion":"ReuniÃ³n con director para revisiÃ³n de avances"
}
JSON

10) Ver bitÃ¡cora completa (Ayudante)
curl -u juan.perez@epn.edu.ec:Temp123* \
  "http://localhost:8080/api/v1/ayudante/bitacoras/PEGAR_BITACORA_ID"

11) Enviar bitÃ¡cora (pasa a ENVIADA)
curl -u juan.perez@epn.edu.ec:Temp123* \
  -X POST \
  "http://localhost:8080/api/v1/ayudante/bitacoras/PEGAR_BITACORA_ID/enviar"


âœ… (Prueba rÃ¡pida de bloqueo): intenta crear otra actividad despuÃ©s de ENVIADA, debe fallar:

curl -u juan.perez@epn.edu.ec:Temp123* \
  -H "Content-Type: application/json" \
  -X POST \
  --data-binary @- \
  "http://localhost:8080/api/v1/ayudante/semanas/PEGAR_SEMANA_ID/actividades" <<'JSON'
{
  "horaInicio":"10:00",
  "horaSalida":"11:00",
  "descripcion":"Esto deberÃ­a fallar porque ya no estÃ¡ BORRADOR"
}
JSON

âœ… Director revisa (Fase 3.C / 3.D)
12) Director lista bitÃ¡coras pendientes del proyecto (debe salir la ENVIADA)
curl -u ariel.guana@epn.edu.ec:Director2026* \
  "http://localhost:8080/api/v1/director/proyectos/PEGAR_PROYECTO_ID/bitacoras/pendientes"

13) Director ve detalle de una bitÃ¡cora
curl -u ariel.guana@epn.edu.ec:Director2026* \
  "http://localhost:8080/api/v1/director/bitacoras/PEGAR_BITACORA_ID"

14) Director RECHAZA (segÃºn tu lÃ³gica: vuelve a BORRADOR + comentario)
curl -u ariel.guana@epn.edu.ec:Director2026* \
  -H "Content-Type: application/json" \
  -X POST \
  -d '{"decision":"RECHAZAR","observacion":"Faltan evidencias en anexos"}' \
  "http://localhost:8080/api/v1/director/bitacoras/PEGAR_BITACORA_ID/revisar"


âœ… Ahora el ayudante deberÃ­a poder editar otra vez (BORRADOR).
Prueba creando una actividad nueva (debe permitir):

curl -u juan.perez@epn.edu.ec:Temp123* \
  -H "Content-Type: application/json" \
  -X POST \
  --data-binary @- \
  "http://localhost:8080/api/v1/ayudante/semanas/PEGAR_SEMANA_ID/actividades" <<'JSON'
{
  "horaInicio":"11:00",
  "horaSalida":"12:00",
  "descripcion":"CorrecciÃ³n tras rechazo"
}
JSON

15) Ayudante vuelve a ENVIAR
curl -u juan.perez@epn.edu.ec:Temp123* \
  -X POST \
  "http://localhost:8080/api/v1/ayudante/bitacoras/PEGAR_BITACORA_ID/enviar"

16) Director APRUEBA (pasa a APROBADA)
curl -u ariel.guana@epn.edu.ec:Director2026* \
  -H "Content-Type: application/json" \
  -X POST \
  -d '{"decision":"APROBAR","observacion":"OK"}' \
  "http://localhost:8080/api/v1/director/bitacoras/PEGAR_BITACORA_ID/revisar"

âœ… FASE 2.9 â€” SemÃ¡foro (Jefatura) (cuenta solo APROBADAS)
17) Jefatura consulta semÃ¡foro (ya deberÃ­a reflejar APROBADA en ese mes)
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  http://localhost:8080/api/v1/jefatura/semaforo

âœ… Consultas generales Jefatura (resumen / estadÃ­sticas)
18) Resumen por proyecto
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  http://localhost:8080/api/v1/jefatura/proyectos/resumen

19) Detalle contratos/ayudantes por proyecto (vista jefatura)
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  http://localhost:8080/api/v1/jefatura/proyectos/PEGAR_PROYECTO_ID/ayudantes

20) EstadÃ­sticas proyectos por tipo y estado
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  http://localhost:8080/api/v1/jefatura/proyectos/estadisticas

21) EstadÃ­sticas ayudantes activos (total + por tipo)
curl -u jonathan.guaman04@epn.edu.ec:Jefatura123* \
  http://localhost:8080/api/v1/jefatura/ayudantes/estadisticas

Si quieres probar â€œrecontrataciÃ³nâ€ (opcional)

âš ï¸ OJO: para que no te bloquee por cupo, primero finaliza el contrato anterior o asegÃºrate que solo haya 1 ACTIVO.

Finalizar contrato (director):

curl -u ariel.guana@epn.edu.ec:Director2026* \
  -H "Content-Type: application/json" \
  -d '{"motivo":"FIN_CONTRATO"}' \
  http://localhost:8080/api/v1/director/contratos/PEGAR_CONTRATO_ID/finalizar


Luego registra de nuevo el mismo ayudante (no debe crear usuario otra vez):

curl -u ariel.guana@epn.edu.ec:Director2026* \
  -H "Content-Type: application/json" \
  -d '{
    "nombres":"Juan",
    "apellidos":"Perez",
    "correoInstitucional":"juan.perez@epn.edu.ec",
    "facultad":"FIS",
    "quintil":2,
    "tipoAyudante":"AYUDANTE_INVESTIGACION",
    "fechaInicioContrato":"2026-04-01",
    "fechaFinContrato":"2026-06-30"
  }' \
  http://localhost:8080/api/v1/director/proyectos/PEGAR_PROYECTO_ID/ayudantes